if(typeof(stlib)=="undefined"){var stlib={}}stlib.OAuthLoginIframe={poller:null,addedListener:false,callback:null,createOAuthLoginIframe:function(b,f){if(!stlib.OAuthLoginIframe.addedListener){stlib.OAuthLoginIframe.addListenerCompatible(window,"message",stlib.OAuthLoginIframe.receiveMessageOAuthLoginIframe);stlib.OAuthLoginIframe.addedListener=true}if(f){stlib.OAuthLoginIframe.callback=f}else{stlib.OAuthLoginIframe.callback=null}stlib.OAuthLoginIframe.checkIframe();var d="http://sharethis.com/account/linking?provider="+b;window.open(d,"AccountLinkingWindow","status=1, height=300, width=450, resizable=1");var e=document.createElement("iframe");e.id="stLoginIframe";var a="http://sd.sharethis.com/disc/loginIframe.html?service="+b+"&cb=callback&src="+encodeURIComponent(document.location.href);e.src=a;e.frameBorder="0";e.scrolling="no";e.width="0px";e.height="0px";e.setAttribute("style","display:none;");var c=document.getElementsByTagName("body")[0];c.appendChild(e);stlib.OAuthLoginIframe.poller=setTimeout(function(){stlib.OAuthLoginIframe.checkIframe()},180000)},receiveMessageOAuthLoginIframe:function(a){if(a.origin!=="http://sd.sharethis.com/"){return}stlib.OAuthLoginIframe.checkIframe();if(stlib.OAuthLoginIframe.callback){stlib.OAuthLoginIframe.callback()}},checkIframe:function(){var b=document.getElementById("stLoginIframe");var a=document.getElementsByTagName("body")[0];if(b){a.removeChild(b);clearTimeout(stlib.OAuthLoginIframe.poller)}},addListenerCompatible:function(c,a,b){if(typeof(c.addEventListener)!="undefined"){c.addEventListener(a,b,false);return true}else{if(typeof c.attachEvent!="undefined"){c.attachEvent("on"+a,b);return true}}return false}};